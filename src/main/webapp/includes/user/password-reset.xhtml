<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:o="http://omnifaces.org/ui" xmlns:p="http://primefaces.org/ui">
<ui:composition template="/WEB-INF/include/base-template.xhtml">
	<ui:define name="head">
		<title>Recruit Time: Reset password</title>
		<h:outputStylesheet name="css/signin.css" />
	</ui:define>
	<ui:define name="body">

		<h:form class="form-signin">

			<h:graphicImage alt="" width="300"
				value="#{resource['images/logo_lg.png']}" />

			<h1 class="h5 mb-3 font-weight-normal">Reset password</h1>

			<h:inputSecret id="password" value="#{passwordResetController.password}"
				class="form-control" a:placeholder="Provide your password."
				required="true" autocomplete="new-password"
				requiredMessage="Please provide your password."
				validatorMessage="Password should match retyped password and minimum length should be 6.">
				<f:validateLength minimum="6"></f:validateLength>
			</h:inputSecret>
			<h:message styleClass="err-message" for="password" />

			<h:inputSecret id="password2" class="form-control"
				a:placeholder="Retype your password." required="true"
				autocomplete="new-password"
				requiredMessage="Please retype your password." />
			<h:message styleClass="err-message" for="password2" />

			<o:validateEqual components="password password2"
				message="Passwords do not match!" showMessageFor="password2" />
				
			<h:inputHidden id="key" value="#{passwordResetController.key}" label="Key"/>
			<h:message styleClass="err-message" for="key" />
			
			<h:messages styleClass="err-message" globalOnly="true" layout="table"/>

			<h:commandButton class="btn btn-lg btn-primary btn-block"
				id="signup-form-submit" action="#{passwordResetController.resetPassword()}"
				value="Reset">
				<f:ajax execute="@form" render="@form" />
			</h:commandButton>

			<div class="form-group">
				<a href="/">Go to Home</a>
			</div>

			<div class="form-group">
				<a href="/login.xhtml">Go to Log in</a>
			</div>

			<div class="form-group">
				<a href="/includes/user/forgot.xhtml">Forgot password</a>
			</div>

		</h:form>
	</ui:define>
</ui:composition>
</html>